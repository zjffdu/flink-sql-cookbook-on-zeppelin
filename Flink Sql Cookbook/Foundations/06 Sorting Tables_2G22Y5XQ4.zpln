{
  "paragraphs": [
    {
      "text": "%md\n\n\u003e :bulb: This example will show how you can sort a table, particularly unbounded tables. \n\nFlink SQL supports `ORDER BY`. Bounded Tables can be sorted by any column, descending or ascending. \n\nTo use `ORDER BY` on unbounded tables like `server_logs` the primary sorting key needs to be a [time attribute](https://docs.ververica.com/user_guide/sql_development/table_view.html#time-attributes) like `log_time`.\n\nIn first example below, we are sorting the `server_logs` by `log_time`. The second example is a bit more advanced: It sorts the number of logs per minute and browser by the `window_time` (a time attribute) and the `cnt_browser` (descending), so that the browser with the highest number of logs is at the top of each window.\n",
      "user": "anonymous",
      "dateUpdated": "2021-10-08 16:36:16.610",
      "progress": 0,
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true,
          "completionKey": "TAB",
          "completionSupport": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cdiv class\u003d\"markdown-body\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ’¡ This example will show how you can sort a table, particularly unbounded tables.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eFlink SQL supports \u003ccode\u003eORDER BY\u003c/code\u003e. Bounded Tables can be sorted by any column, descending or ascending.\u003c/p\u003e\n\u003cp\u003eTo use \u003ccode\u003eORDER BY\u003c/code\u003e on unbounded tables like \u003ccode\u003eserver_logs\u003c/code\u003e the primary sorting key needs to be a \u003ca href\u003d\"https://docs.ververica.com/user_guide/sql_development/table_view.html#time-attributes\"\u003etime attribute\u003c/a\u003e like \u003ccode\u003elog_time\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eIn first example below, we are sorting the \u003ccode\u003eserver_logs\u003c/code\u003e by \u003ccode\u003elog_time\u003c/code\u003e. The second example is a bit more advanced: It sorts the number of logs per minute and browser by the \u003ccode\u003ewindow_time\u003c/code\u003e (a time attribute) and the \u003ccode\u003ecnt_browser\u003c/code\u003e (descending), so that the browser with the highest number of logs is at the top of each window.\u003c/p\u003e\n\n\u003c/div\u003e"
          }
        ]
      },
      "apps": [],
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1614268041202_1817551626",
      "id": "paragraph_1614268041202_1817551626",
      "dateCreated": "2021-02-25 23:47:21.202",
      "dateStarted": "2021-10-08 16:36:16.611",
      "dateFinished": "2021-10-08 16:36:16.615",
      "status": "FINISHED"
    },
    {
      "text": "%md\næœ¬ä¾‹å°†å±•ç¤ºå¦‚ä½•å¯¹è¡¨è¿›è¡Œæ’åºï¼Œç‰¹åˆ«æ˜¯å¯¹ä¸æ— ç•Œè¡¨è¿›è¡Œæ’åºã€‚\n\nFlink SQL æ”¯æŒ `ORDER BY`ã€‚å¯¹äºæœ‰ç•Œè¡¨ï¼Œå®ƒå¯ä»¥å¯¹ä»»ä½•å­—æ®µè¿›è¡Œå‡åºæˆ–è€…é™åºæ’åºã€‚\nå¯¹äºåƒ  `server_logs` è¿™æ ·çš„æ— ç•Œè¡¨ï¼Œä¸ºäº†æ”¯æŒ `ORDER BY` ä¸»è¦çš„æ’åºå­—æ®µå¿…é¡»æ˜¯ [æ—¶é—´å±æ€§](https://docs.ververica.com/user_guide/sql_development/table_view.html#time-attributes) ï¼Œä¾‹å¦‚ `log_time`.\n\nä¸‹é¢çš„ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `log_time` å¯¹ `server_logs` æ’åºã€‚ ç¬¬äºŒä¸ªä¾‹å­ç¨å¾®å¤æ‚ä¸€äº›ï¼šå®ƒå°†æ¯åˆ†é’Ÿæ¯ç§æµè§ˆå™¨çš„æ—¥å¿—æ•°é‡é€šè¿‡ `window_time` (ä¸€ä¸ªæ—¶é—´å±æ€§) å’Œ `cnt_browser` æ’åº (é™åº)ï¼Œç»“æœæ˜¯æ¯ä¸ªçª—å£ä¸­æ—¥å¿—æ•°é‡æœ€å¤šçš„æµè§ˆå™¨æ’åœ¨çª—å£çš„æœ€ä¸Šé¢ã€‚\n",
      "user": "anonymous",
      "dateUpdated": "2021-03-18 15:27:42.861",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true,
          "completionKey": "TAB",
          "completionSupport": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "results": {},
        "enabled": true,
        "editorHide": true,
        "tableHide": false
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cdiv class\u003d\"markdown-body\"\u003e\n\u003cp\u003eæœ¬ä¾‹å°†å±•ç¤ºå¦‚ä½•å¯¹è¡¨è¿›è¡Œæ’åºï¼Œç‰¹åˆ«æ˜¯å¯¹ä¸æ— ç•Œè¡¨è¿›è¡Œæ’åºã€‚\u003c/p\u003e\n\u003cp\u003eFlink SQL æ”¯æŒ \u003ccode\u003eORDER BY\u003c/code\u003eã€‚å¯¹äºæœ‰ç•Œè¡¨ï¼Œå®ƒå¯ä»¥å¯¹ä»»ä½•å­—æ®µè¿›è¡Œå‡åºæˆ–è€…é™åºæ’åºã€‚\u003cbr /\u003e\nå¯¹äºåƒ  \u003ccode\u003eserver_logs\u003c/code\u003e è¿™æ ·çš„æ— ç•Œè¡¨ï¼Œä¸ºäº†æ”¯æŒ \u003ccode\u003eORDER BY\u003c/code\u003e ä¸»è¦çš„æ’åºå­—æ®µå¿…é¡»æ˜¯ \u003ca href\u003d\"https://docs.ververica.com/user_guide/sql_development/table_view.html#time-attributes\"\u003eæ—¶é—´å±æ€§\u003c/a\u003e ï¼Œä¾‹å¦‚ \u003ccode\u003elog_time\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eä¸‹é¢çš„ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ \u003ccode\u003elog_time\u003c/code\u003e å¯¹ \u003ccode\u003eserver_logs\u003c/code\u003e æ’åºã€‚ ç¬¬äºŒä¸ªä¾‹å­ç¨å¾®å¤æ‚ä¸€äº›ï¼šå®ƒå°†æ¯åˆ†é’Ÿæ¯ç§æµè§ˆå™¨çš„æ—¥å¿—æ•°é‡é€šè¿‡ \u003ccode\u003ewindow_time\u003c/code\u003e (ä¸€ä¸ªæ—¶é—´å±æ€§) å’Œ \u003ccode\u003ecnt_browser\u003c/code\u003e æ’åº (é™åº)ï¼Œç»“æœæ˜¯æ¯ä¸ªçª—å£ä¸­æ—¥å¿—æ•°é‡æœ€å¤šçš„æµè§ˆå™¨æ’åœ¨çª—å£çš„æœ€ä¸Šé¢ã€‚\u003c/p\u003e\n\n\u003c/div\u003e"
          }
        ]
      },
      "apps": [],
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1615107109571_1255171753",
      "id": "paragraph_1615107109571_1255171753",
      "dateCreated": "2021-03-07 08:51:49.572",
      "dateStarted": "2021-03-18 15:27:42.858",
      "dateFinished": "2021-03-18 15:27:42.871",
      "status": "FINISHED"
    },
    {
      "text": "%flink.ssql\n\n\nDROP TEMPORARY TABLE IF EXISTS server_logs_temp;\n\nCREATE TEMPORARY TABLE server_logs_temp ( \n    client_ip STRING,\n    client_identity STRING, \n    userid STRING, \n    user_agent STRING,\n    log_time TIMESTAMP(3),\n    request_line STRING, \n    status_code STRING, \n    size INT, \n    WATERMARK FOR log_time AS log_time - INTERVAL \u002715\u0027 SECONDS\n) WITH (\n  \u0027connector\u0027 \u003d \u0027faker\u0027, \n  \u0027fields.client_ip.expression\u0027 \u003d \u0027#{Internet.publicIpV4Address}\u0027,\n  \u0027fields.client_identity.expression\u0027 \u003d  \u0027-\u0027,\n  \u0027fields.userid.expression\u0027 \u003d  \u0027-\u0027,\n  \u0027fields.user_agent.expression\u0027 \u003d \u0027#{Internet.userAgentAny}\u0027,\n  \u0027fields.log_time.expression\u0027 \u003d  \u0027#{date.past \u0027\u002715\u0027\u0027,\u0027\u00275\u0027\u0027,\u0027\u0027SECONDS\u0027\u0027}\u0027,\n  \u0027fields.request_line.expression\u0027 \u003d \u0027#{regexify \u0027\u0027(GET|POST|PUT|PATCH){1}\u0027\u0027} #{regexify \u0027\u0027(/search\\.html|/login\\.html|/prod\\.html|cart\\.html|/order\\.html){1}\u0027\u0027} #{regexify \u0027\u0027(HTTP/1\\.1|HTTP/2|/HTTP/1\\.0){1}\u0027\u0027}\u0027,\n  \u0027fields.status_code.expression\u0027 \u003d \u0027#{regexify \u0027\u0027(200|201|204|400|401|403|301){1}\u0027\u0027}\u0027,\n  \u0027fields.size.expression\u0027 \u003d \u0027#{number.numberBetween \u0027\u0027100\u0027\u0027,\u0027\u002710000000\u0027\u0027}\u0027\n);",
      "user": "anonymous",
      "dateUpdated": "2021-02-26 11:51:44.113",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1614265728664_1117299697",
      "id": "paragraph_1614265728664_1117299697",
      "dateCreated": "2021-02-25 23:08:48.664",
      "dateStarted": "2021-02-26 11:51:44.117",
      "dateFinished": "2021-02-26 11:51:44.904",
      "status": "FINISHED"
    },
    {
      "text": "%flink.ssql(type\u003dupdate)\n\nSELECT * FROM server_logs_temp \nORDER BY log_time desc limit 10;\n",
      "user": "anonymous",
      "dateUpdated": "2021-02-26 11:51:48.528",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "client_ip": "string",
                      "client_identity": "string",
                      "userid": "string",
                      "user_agent": "string",
                      "log_time": "string",
                      "request_line": "string",
                      "status_code": "string",
                      "size": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "runtimeInfos": {
        "jobUrl": {
          "propertyName": "jobUrl",
          "label": "FLINK JOB",
          "tooltip": "View in Flink web UI",
          "group": "flink",
          "values": [
            {
              "jobUrl": "http://localhost:8081#/job/3d2fe144d9fe2c37c84f7a2f2da42cd9"
            }
          ],
          "interpreterSettingId": "flink"
        }
      },
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1614265748275_1173150160",
      "id": "paragraph_1614265748275_1173150160",
      "dateCreated": "2021-02-25 23:09:08.275",
      "dateStarted": "2021-02-26 11:51:48.536",
      "dateFinished": "2021-02-26 11:52:06.329",
      "status": "ABORT"
    },
    {
      "text": "%flink.ssql\n\nDROP TEMPORARY TABLE IF EXISTS server_logs_temp;\n\nCREATE TEMPORARY TABLE server_logs_temp ( \n    client_ip STRING,\n    client_identity STRING, \n    userid STRING, \n    user_agent STRING,\n    log_time TIMESTAMP(3),\n    request_line STRING, \n    status_code STRING, \n    size INT, \n    WATERMARK FOR log_time AS log_time - INTERVAL \u002715\u0027 SECONDS\n) WITH (\n  \u0027connector\u0027 \u003d \u0027faker\u0027, \n  \u0027fields.client_ip.expression\u0027 \u003d \u0027#{Internet.publicIpV4Address}\u0027,\n  \u0027fields.client_identity.expression\u0027 \u003d  \u0027-\u0027,\n  \u0027fields.userid.expression\u0027 \u003d  \u0027-\u0027,\n  \u0027fields.user_agent.expression\u0027 \u003d \u0027#{Internet.userAgentAny}\u0027,\n  \u0027fields.log_time.expression\u0027 \u003d  \u0027#{date.past \u0027\u002715\u0027\u0027,\u0027\u00275\u0027\u0027,\u0027\u0027SECONDS\u0027\u0027}\u0027,\n  \u0027fields.request_line.expression\u0027 \u003d \u0027#{regexify \u0027\u0027(GET|POST|PUT|PATCH){1}\u0027\u0027} #{regexify \u0027\u0027(/search\\.html|/login\\.html|/prod\\.html|cart\\.html|/order\\.html){1}\u0027\u0027} #{regexify \u0027\u0027(HTTP/1\\.1|HTTP/2|/HTTP/1\\.0){1}\u0027\u0027}\u0027,\n  \u0027fields.status_code.expression\u0027 \u003d \u0027#{regexify \u0027\u0027(200|201|204|400|401|403|301){1}\u0027\u0027}\u0027,\n  \u0027fields.size.expression\u0027 \u003d \u0027#{number.numberBetween \u0027\u0027100\u0027\u0027,\u0027\u002710000000\u0027\u0027}\u0027\n);\n",
      "user": "anonymous",
      "dateUpdated": "2021-02-26 11:51:58.634",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1614265830633_644386006",
      "id": "paragraph_1614265830633_644386006",
      "dateCreated": "2021-02-25 23:10:30.633",
      "dateStarted": "2021-02-26 11:51:58.640",
      "dateFinished": "2021-02-26 11:51:59.530",
      "status": "FINISHED"
    },
    {
      "text": "%flink.ssql(type\u003dupdate)\n\nSELECT \n  TUMBLE_ROWTIME(log_time, INTERVAL \u00271\u0027 MINUTE) AS window_time,\n  REGEXP_EXTRACT(user_agent,\u0027[^\\/]+\u0027) AS browser,\n  COUNT(*) AS cnt_browser\nFROM server_logs_temp\nGROUP BY \n  REGEXP_EXTRACT(user_agent,\u0027[^\\/]+\u0027),\n  TUMBLE(log_time, INTERVAL \u00271\u0027 MINUTE)\nORDER BY\n  window_time,\n  cnt_browser DESC\nLIMIT 10\n",
      "user": "anonymous",
      "dateUpdated": "2021-02-26 11:52:03.138",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "window_time": "string",
                      "browser": "string",
                      "cnt_browser": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "runtimeInfos": {
        "jobUrl": {
          "propertyName": "jobUrl",
          "label": "FLINK JOB",
          "tooltip": "View in Flink web UI",
          "group": "flink",
          "values": [
            {
              "jobUrl": "http://localhost:8081#/job/342fe8e8d29aa087ed832cc53449cad6"
            }
          ],
          "interpreterSettingId": "flink"
        }
      },
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1614311113990_225571058",
      "id": "paragraph_1614311113990_225571058",
      "dateCreated": "2021-02-26 11:45:13.995",
      "dateStarted": "2021-02-26 11:52:03.142",
      "dateFinished": "2021-02-26 11:52:13.863",
      "status": "ABORT"
    },
    {
      "text": "%flink.ssql\n",
      "user": "anonymous",
      "dateUpdated": "2021-02-26 11:45:36.035",
      "progress": 0,
      "config": {},
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1614311136034_816933459",
      "id": "paragraph_1614311136034_816933459",
      "dateCreated": "2021-02-26 11:45:36.034",
      "status": "READY"
    }
  ],
  "name": "06 Sorting Tables",
  "id": "2G22Y5XQ4",
  "defaultInterpreterGroup": "flink",
  "version": "0.10.0-SNAPSHOT",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {},
  "config": {
    "isZeppelinNotebookCronEnable": false
  },
  "info": {}
}